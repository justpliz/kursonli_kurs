const updateContainer=(t,e,i,n)=>{i.length>0?(t.value=i.join(","),e.innerText=i.join(", ")):(t.value="",e.innerText=n[0].innerText),t.dispatchEvent(new window.Event("change",{bubbles:!0}))},buttonToggle=(t,e)=>{t.classList.toggle("multi__dropdown--toggle"),e.classList.toggle("multi--hidden")},map={};let multi_idx=0;const multiSelect=()=>{Array.from(document.querySelectorAll(".multi")).filter(t=>null===t.getAttribute("data-multiselect-initialized")).forEach(t=>{map[multi_idx]=[];const{options:e}=t,i=document.createElement("div");t.classList.forEach(t=>{i.classList.add(t)}),i.setAttribute("data-multiselect-initialized",!0),i.setAttribute("key",multi_idx);const n=multi_idx;t.id&&(i.id=t.id),t.getAttribute("name")&&i.setAttribute("name",t.getAttribute("name")),t.getAttribute("onchange")&&i.setAttribute("onchange",t.getAttribute("onchange"));const l=document.createElement("button");l.classList.add("multi__display");const d=document.createElement("div");d.classList.add("multi__inner"),d.innerText=e[0].innerText,l.value="",i.appendChild(l),l.appendChild(d),t.parentNode.replaceChild(i,t);const a=document.createElement("div");a.classList.add("multi__dropdown");const s=document.createElement("ul");a.classList.add("multi--hidden");for(let t=1;t<e.length;t++){const l=document.createElement("li");l.classList.add("multi__li-item"),l.innerText=e[t].innerText,l.addEventListener("click",t=>{t.stopPropagation(),map[n].includes(t.target.innerText)?(map[n].splice(map[n].indexOf(t.target.innerText),1),t.target.classList.remove("multi__li-item--selected")):(map[n].push(t.target.innerText),t.target.classList.add("multi__li-item--selected")),updateContainer(i,d,map[n],e)}),s.appendChild(l)}i.addEventListener("click",t=>{t.stopPropagation(),buttonToggle(l,a)}),i.appendChild(a),a.appendChild(s)}),multi_idx++};document.addEventListener("click",t=>{document.querySelectorAll(".multi__display").forEach(t=>{t.classList.remove("multi__dropdown--toggle")}),document.querySelectorAll(".multi__dropdown").forEach(t=>{t.classList.add("multi--hidden")})}),document.addEventListener("DOMContentLoaded",function(t){multiSelect()}),window.multiSelect={refresh(){multiSelect()}};